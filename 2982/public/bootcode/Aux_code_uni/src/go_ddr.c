/****************************************************************************************
* Program Name:     
* Author:               
* Date:                 
* Description:   
* Copyright (C) 2013 Realtek Inc. All Right Reserved.
****************************************************************************************/

/************************************************************************
 *  Include files
 ************************************************************************/
#include "util.h"
#include "loader.h"
#include "UART.h"
#include "sys_reg.h"

/************************************************************************
 *  Definitions
 ************************************************************************/

/************************************************************************
 *  External variables
 ************************************************************************/
extern unsigned int _f_arm_start, _e_arm_start;
extern unsigned int _f_arm_start2, _e_arm_start2;

/************************************************************************
 *  Public variables
 ************************************************************************/

/************************************************************************
 *  Static variables
 ************************************************************************/

/************************************************************************
 *  External function prototype
 ************************************************************************/

/************************************************************************
 *  Public function prototype
 ************************************************************************/

/************************************************************************
 *  Static function prototype
 ************************************************************************/

/************************************************************************
 *  Function body
 ************************************************************************/
void go_ddr_realchip(void)
{
	unsigned char *p_start, *p_end;

	debug("prepare ARM redirect image on DDR\n");
	p_start = (unsigned char *)&_f_arm_start;
	p_end = (unsigned char *)&_e_arm_start;
	copy_memory((unsigned char *)0xa0000000, p_start, p_end - p_start);
	p_start = (unsigned char *)&_f_arm_start2;
	p_end = (unsigned char *)&_e_arm_start2;
	copy_memory((unsigned char *)0xa001f800, p_start, p_end - p_start);
}

void go_ddr(void)
{
	go_ddr_realchip();
}
